#!/bin/bash
orign_file="openwrt-ar71xx-generic-ap152-16M-squashfs-sysupgrade.bin"

tar czf ${orign_file}.tar.gz ${orign_file}

# 64bytes header
header="\x27\x05\x19\x56\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\
\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\
\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\
\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30"
echo -e "${header}" > bin.app
cat ${orign_file}.tar.gz >> bin.app

